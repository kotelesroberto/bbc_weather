var GeneralFunctions={prevent_default:function(){"use strict";window.event?window.event.returnValue=!1:event.preventDefault?event.preventDefault():event.returnValue=!1},convertCtoF:function(e){"use strict";var t=9*e/5+32;return parseFloat(t.toFixed(2))},convertFtoC:function(e){"use strict";var t=5*(e-32)/9;return parseFloat(t.toFixed(2))},convertKPMHtoMPH:function(e){"use strict";var t=e/1.609344;return parseFloat(t.toFixed(2))},convertMPHtoKMPH:function(e){"use strict";var t=1.609344*e;return parseFloat(t.toFixed(2))},timezoneToLocationName:function(e){return e.split("/")[1].replace("_"," ")}},Header={initialize:function(){this.onScroll()},onScroll:function(){"use strict";var e,t,n=this,i=$(window).scrollTop();$(window).on("scroll",function(){t=$(window).scrollTop(),i<100?e="":(i>t&&(e="scrolling-up"),i<t&&(e="scrolling-down")),i=t,n.handleState(e)})},handleState:function(e){"use strict";$("body").removeClass("scrolling-up scrolling-down").addClass(e)}},Navigation={initialize:function(){var e=this;$("#primary-menu li").mouseenter(function(){e.onOpen()}),$("#primary-menu li").mouseleave(function(){e.onClose()}),e.onClick()},onClick:function(){"use strict";$(".header-logo").on("click",function(){window.location.href="index.html"}),$("#mobilemenu-trigger").on("click",function(){GeneralFunctions.prevent_default(),$(this).parents("header").toggleClass("mobilemenu-open")})},onOpen:function(){"use strict";$("body").addClass("navigation-visible")},onClose:function(){"use strict";$("body").removeClass("navigation-visible")}},Footer={initialize:function(){this.onClick()},onClick:function(){"use strict";$(".footer-logo").on("click",function(){window.location.href="index.html"})}},iconArray={"clear-day":"pe-is-w-sun-1","clear-night":"pe-is-w-moon-1",rain:"pe-is-w-rain-1",snow:"pe-is-w-snow",sleet:"pe-is-w-rain-and-snow",wind:"pe-is-w-wind-2",fog:"pe-is-w-fog-1",cloudy:"pe-is-w-mostly-cloudy-2","partly-cloudy-day":"pe-is-w-partly-cloudy-1","partly-cloudy-night":"pe-is-w-partly-cloudy-3",hail:"pe-is-w-hail-1",thunderstorm:"pe-is-w-thunderstorm",tornado:"pe-is-w-tornado-1"},Services={initialize:function(){this.loadLocations()},loadLocations:function(){"use strict";var e=$("main").find("#forecast-selector"),t=[{name:"London",coordinates:["51.507194","-0.137311"],bgimage:"london.jpg"},{name:"Paris",coordinates:["48.856878","2.348987"],bgimage:"paris.jpg"},{name:"New York",coordinates:["40.686658","-73.970547"],bgimage:"newyork.jpg"},{name:"Singapore",coordinates:["1.346260","103.847672"],bgimage:"singapore.jpg"},{name:"Sydney",coordinates:["-33.830817","151.212088"],bgimage:"sydney.jpg"}],n='<a href="#" class="city-selected dropdown-box"><p class="display-text"></p><span class="icon"></span></a>';n+='<ul class="city-list">';for(var i in t)n+='<li class="" data-bgimage="'+t[i].bgimage+'" data-latitude="'+t[i].coordinates[0]+'" data-longitude="'+t[i].coordinates[1]+'">'+t[i].name+"</li>";n+="</ul>",e.html(n).find("li:FIRST-CHILD").addClass("selected"),$("#forecast-panel-daily").after('<div class="button-wrapper"><div class="change-temp-unit button" data-currenttempunit="F">Change units to &deg;<span class="temp-unit strong">C</span> and <span class="wind-unit strong">km&sol;h</span></div></div>'),this.onClick(t),this.loadList(t[0].coordinates[0],t[0].coordinates[1],t[0].bgimage)},loadList:function(e,t,n){"use strict";var i=this,a="https://api.darksky.net/forecast/6a949cbb55dfa9c681ae52ac95ef027d/"+e+","+t,s=$("main"),o=s.find("#forecast-panel-current span.loadArea"),r=s.find("#forecast-panel-daily span.loadArea"),l=new Image,c="assets/images/cities/"+n;l.src=c,l.onload=function(){$(".location-bg").css("background-image","url("+c+")").removeClass("empty")},$.ajax(a,{dataType:"json"}).done(function(e){if(e){var t='<div class="forecast-current">';t+='<h2 class="location">'+GeneralFunctions.timezoneToLocationName(e.timezone)+"</h2>",e.currently.temperature&&(t+='<div class="current-temperature temperature-value"><span class="temp-value" data-fahrenheit="'+e.currently.temperature+'">'+e.currently.temperature+'</span>&deg;<span class="temp-unit">F</span></div>'),e.currently.icon&&(t+='<div class="current-icon"><i class="'+iconArray[e.currently.icon]+'"></i></div>'),e.currently.summary&&(t+='<p class="current-summary">'+e.currently.summary+"</p>"),e.currently.windSpeed&&(t+='<p class="current-wind speed-value"><i class="pe-is-w-wind-cone"></i> <span class="wind-value" data-windspeed="'+e.currently.windSpeed+'">'+e.currently.windSpeed+'</span> <span class="wind-unit">mph</span> <i class="direction" data-direction="'+e.currently.windBearing+'" style="transform:rotate(-'+e.currently.windBearing+'deg)">&rarr;</i></p>'),t+="</div>",$(".city-selected").find(".display-text").html(GeneralFunctions.timezoneToLocationName(e.timezone)),o.html(t),e.daily&&(t="",e.daily.summary&&(t+="<p>"+e.daily.summary+"</p>"),t+='<ul class="forecast-daily">',$.each(e.daily.data,function(e,n){var i=new Date(1e3*n.time).toString().split(" ")[0];t+="<li>",t+='<div class="daily-date">'+i+"</div>",t+='<div class="daily-icon"><i class="'+iconArray[n.icon]+'"></i></div>',t+='<div class="daily-maxTemperature temperature-value"><span class="temp-value" data-fahrenheit="'+n.temperatureHigh+'">'+n.temperatureHigh+'</span>&deg;<span class="temp-unit">F</span></div>',t+='<div class="daily-minTemperature temperature-value"><span class="temp-value" data-fahrenheit="'+n.temperatureLow+'">'+n.temperatureLow+'</span>&deg;<span class="temp-unit">F</span></div>',t+="</li>"}),t+="</ul>",r.html(t)),i.convertUnits($(".change-temp-unit").attr("data-currenttempunit"),!1)}})},convertUnits:function(e,t){var n,i=$(".change-temp-unit"),a=$(".temp-unit"),s=$(".wind-unit"),o=i.find(".temp-unit"),r=i.find(".wind-unit"),l="",c="",d="";t?("C"==e?(c="km&sol;h",l="F",d="mph",n=!1):(c="mph",l="C",d="km&sol;h",n=!0),i.attr("data-currenttempunit",l)):"C"==e?(c="mph",l="C",d="km&sol;h",n=!0):(c="km&sol;h",l="F",d="mph",n=!1,n=!1),a.html(l),o.html(e),s.html(d),r.html(c),$(".temperature-value").each(function(){var e=$(this).find(".temp-value");n?e.html(GeneralFunctions.convertFtoC(e.data("fahrenheit"))):e.html(e.data("fahrenheit"))}),$(".speed-value").each(function(){$this=$(this);var e=$this.find(".wind-value");n?e.html(GeneralFunctions.convertMPHtoKMPH(e.data("windspeed"))):e.html(e.data("windspeed"))})},onClick:function(e){"use strict";var t=this;$(".dropdown-box").on("click",function(){$(this).parent().toggleClass("dropdown-is-active")}),$(".city-list").find("li").on("click",function(){var e=$(this);$(".dropdown-is-active").removeClass("dropdown-is-active"),e.siblings().removeClass("selected"),e.addClass("selected"),t.loadList(e.data("latitude"),e.data("longitude"),e.data("bgimage"))}),$(".change-temp-unit").on("click",function(){var e=$(this);e.find(".temp-unit");t.convertUnits(e.attr("data-currenttempunit"),!0)})}};$(function(){Header.initialize(),Navigation.initialize(),Footer.initialize(),Services.initialize()});